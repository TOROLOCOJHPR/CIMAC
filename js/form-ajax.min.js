$("#formulario").submit(function(e) {
    $('#nombre').prop('readonly', true);
    $('#email').prop('readonly', true);
    $('#telefono').prop('readonly', true);
    $('#msg').prop('readonly', true);
    $('#enviar').prop('disabled', true);
    e.preventDefault(); // avoid to execute the actual submit of the form.
    $.ajax({
        type: "POST",
        url: '../inc/ajax-contacto.php',
        dataType: 'json',
        data: $("#formulario").serialize(), // serializes the form's elements.
        success: function(data) {
            console.log(data);
            switch (data.status) {
                case 'success':
                    alert(data.message);
                    $('#enviar, #enviar-otro').toggleClass( "d-none" );
                    // $('#formulario')[0].reset();
                    nuevomensaje();
                    break;
                case 'error':
                    alert(data.message);
                    $('#enviar').prop('disabled', false); 
                    $('#nombre').prop('readonly', false);
                    $('#email').prop('readonly', false);
                    $('#telefono').prop('readonly', false);
                    $('#msg').prop('readonly', false);
                    break;
            }
        }
    });
});

function nuevomensaje() {
    $('#enviar, #enviar-otro').toggleClass( "d-none" );
    $('#nombre').prop('readonly', false);
    $('#email').prop('readonly', false);
    $('#msg').prop('readonly', false);
    $('#telefono').prop('readonly', false);
    $('#msg').val('')
    grecaptcha.reset();
}

function enableBtn() {
    $('#enviar').prop('disabled', false); 
}